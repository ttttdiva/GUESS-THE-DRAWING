# game_logic.py

import random
from collections import Counter

from db import (add_answer, create_game, get_ai_answer, get_answers,
                get_final_image_path, get_game_info, get_players, get_state,
                get_topic, set_ai_answer, set_final_image, set_state)
from openai_helper import (analyze_image, check_answer_via_chat,
                           pick_human_final_answer_via_chat)

topics = [
    "日本",
    "アメリカ",
    "フランス",
    "イタリア",
    "ドイツ",
    "スペイン",
    "イギリス",
    "中国",
    "韓国",
    "ロシア",
    "カナダ",
    "ブラジル",
    "オーストラリア",
    "インド",
    "エジプト",
    "メキシコ",
    "スイス",
    "スウェーデン",
    "ノルウェー",
    "デンマーク",
    "フィンランド",
    "チリ",
    "アルゼンチン",
    "南アフリカ",
    "タイ",
    "ベトナム",
    "トルコ",
    "ギリシャ",
    "ポルトガル",
    "サウジアラビア",
    "イラン",
    "インドネシア",
    "マレーシア",
    "シンガポール",
    "UAE(アラブ首長国連邦)",
    "カタール",
    "モロッコ",
    "ケニア",
    "ペルー",
    "コロンビア",
    "ハワイ(アメリカ領)",
    "アラスカ(アメリカ領)",
    "グリーンランド",
    "キューバ",
    "ジャマイカ",
    "ニュージーランド",
    "アイルランド",
    "ポーランド",
    "オーストリア",
    "ベルギー",
    "オランダ",
    "ハンガリー",
    "チェコ",
    "スロバキア",
    "ルーマニア",
    "ブルガリア",
    "カンボジア",
    "ラオス",
    "フィリピン",
    "ネパール",
    "ブータン",
    "パキスタン",
    "バングラデシュ",
    "スリランカ",
    "モルディブ",
    "グアム",
    "フィジー",
    "タヒチ",
    "マダガスカル",
    "エチオピア",
    "ナイジェリア",
    "ガーナ",
    "トリニダード・トバゴ",
    "パナマ",
    "コスタリカ",
    "ボリビア",
    "ウルグアイ",
    "パラグアイ",
    "ベネズエラ",
    "ドミニカ共和国",
    "レバノン",
    "イスラエル",
    "ヨルダン",
    "イラク",
    "クウェート",
    "バーレーン",
    "オマーン",
    "イエメン",
    "スーダン",
    "チュニジア",
    "リビア",
    "ナミビア",
    "ジンバブエ",
    "タンザニア",
    "ザンビア",
    "モザンビーク",
    "カザフスタン",
    "ウズベキスタン",
    "モンゴル",
    "フランス・パリ",
    "イタリア・ローマ",
    "イギリス・ロンドン",
    "日本・東京",
    "アメリカ・ニューヨーク",
    "ブラジル・リオデジャネイロ",
    "中国・北京",
    "韓国・ソウル",
    "ロシア・モスクワ",
    "オーストラリア・シドニー",
    "カナダ・トロント",
    "ドイツ・ベルリン",
    "スペイン・マドリード",
    "ポルトガル・リスボン",
    "ギリシャ・アテネ",
    "エジプト・カイロ",
    "インド・デリー",
    "タイ・バンコク",
    "メキシコ・メキシコシティ",
    "トルコ・イスタンブール",
    "アメリカ・ロサンゼルス",
    "フランス・ニース",
    "イタリア・ミラノ",
    "イギリス・マンチェスター",
    "日本・京都",
    "日本・大阪",
    "ドバイ(UAE)",
    "香港(中国)",
    "シンガポール(国)",
    "インドネシア・バリ島",
    "マレーシア・クアラルンプール",
    "スイス・ジュネーブ",
    "スウェーデン・ストックホルム",
    "ノルウェー・オスロ",
    "デンマーク・コペンハーゲン",
    "フィンランド・ヘルシンキ",
    "ベルギー・ブリュッセル",
    "オランダ・アムステルダム",
    "ハワイ・ホノルル",
    "タヒチ・パペーテ",
    "モロッコ・マラケシュ",
    "カイロ(エジプト)",
    "モンゴル・ウランバートル",
    "ジャマイカ・キングストン",
    "キューバ・ハバナ",
    "コロンビア・ボゴタ",
    "チリ・サンティアゴ",
    "アルゼンチン・ブエノスアイレス",
    "ペルー・リマ",
    "南アフリカ・ケープタウン",
    "ケニア・ナイロビ",
    "イタリア・ヴェネツィア",
    "フランス・マルセイユ",
    "スペイン・バルセロナ",
    "ギリシャ・サントリーニ島",
    "イギリス・エジンバラ",
    "ドイツ・ミュンヘン",
    "ロシア・サンクトペテルブルク",
    "スイス・チューリッヒ",
    "UAE・アブダビ",
    "オーストラリア・メルボルン",
    "エンパイアステートビル(アメリカ)",
    "エッフェル塔(フランス)",
    "自由の女神(アメリカ)",
    "ピラミッド(エジプト)",
    "万里の長城(中国)",
    "タージマハル(インド)",
    "コロッセオ(イタリア)",
    "サグラダ・ファミリア(スペイン)",
    "ビッグベン(イギリス)",
    "ノートルダム大聖堂(フランス)",
    "ロンドン塔(イギリス)",
    "シドニーオペラハウス(オーストラリア)",
    "マチュピチュ(ペルー)",
    "モアイ像(イースター島)",
    "自由の鐘(アメリカ・フィラデルフィア)",
    "ブランデンブルク門(ドイツ)",
    "ゴールデンゲートブリッジ(アメリカ)",
    "国会議事堂(日本)",
    "東京タワー(日本)",
    "東京スカイツリー(日本)",
    "清水寺(日本)",
    "金閣寺(日本)",
    "姫路城(日本)",
    "熊本城(日本)",
    "出雲大社(日本)",
    "富士山(日本)",
    "グランドキャニオン(アメリカ)",
    "ナイアガラの滝(アメリカ/カナダ)",
    "イグアスの滝(アルゼンチン/ブラジル)",
    "エアーズロック(オーストラリア)",
    "キリマンジャロ(タンザニア)",
    "エベレスト(ネパール/中国)",
    "アルプス山脈(ヨーロッパ)",
    "ピサの斜塔(イタリア)",
    "凱旋門(フランス)",
    "凍った湖(どこでも)",
    "海(一般的な海)",
    "サハラ砂漠(アフリカ)",
    "アマゾン川(南米)",
    "ナイル川(アフリカ)",
    "リンゴ",
    "バナナ",
    "イチゴ",
    "スイカ",
    "メロン",
    "ブドウ",
    "オレンジ",
    "ミカン",
    "レモン",
    "ライム",
    "キウイ",
    "パイナップル",
    "マンゴー",
    "パパイヤ",
    "ドリアン",
    "さくらんぼ",
    "桃",
    "梨",
    "スモモ",
    "柿",
    "みたらし団子",
    "大福",
    "餅",
    "寿司",
    "刺身",
    "天ぷら",
    "うどん",
    "そば",
    "ラーメン",
    "餃子",
    "焼肉",
    "たこ焼き",
    "お好み焼き",
    "ハンバーガー",
    "ピザ",
    "フライドポテト",
    "スパゲッティ",
    "カレーライス",
    "ナン",
    "チキンカレー",
    "インドカレー",
    "グリーンカレー(タイ)",
    "フォー(ベトナム)",
    "春巻き",
    "北京ダック",
    "バゲット(フランスパン)",
    "クロワッサン",
    "マカロン",
    "チーズ",
    "ワイン",
    "ビール",
    "コーラ",
    "オレンジジュース",
    "アップルジュース",
    "ミルク",
    "コーヒー",
    "紅茶",
    "緑茶",
    "抹茶",
    "そば茶",
    "味噌汁",
    "豆腐",
    "枝豆",
    "納豆",
    "きゅうり",
    "ナス",
    "トマト",
    "キャベツ",
    "レタス",
    "タマネギ",
    "ニンジン",
    "ジャガイモ",
    "サツマイモ",
    "カボチャ",
    "ホウレンソウ",
    "ブロッコリー",
    "ピーマン",
    "パプリカ",
    "トウモロコシ",
    "アスパラガス",
    "マッシュルーム",
    "生ハム",
    "ベーコン",
    "ソーセージ",
    "ステーキ",
    "ポテトチップス",
    "チョコレート",
    "アイスクリーム",
    "ケーキ",
    "ドーナツ",
    "クッキー",
    "マフィン",
    "パンケーキ",
    "ワッフル",
    "プリン",
    "ゼリー",
    "ヨーグルト",
    "ジャム",
    "ハチミツ",
    "バター",
    "牛",
    "馬",
    "豚",
    "羊",
    "山羊",
    "犬",
    "猫",
    "ライオン",
    "トラ",
    "ヒョウ",
    "チーター",
    "キリン",
    "ゾウ",
    "サイ",
    "カバ",
    "カンガルー",
    "コアラ",
    "パンダ",
    "オラウータン",
    "ゴリラ",
    "チンパンジー",
    "オオカミ",
    "キツネ",
    "タヌキ",
    "ウサギ",
    "ハムスター",
    "リス",
    "ネズミ",
    "モグラ",
    "イノシシ",
    "シカ",
    "クマ",
    "ハリネズミ",
    "スカンク",
    "アライグマ",
    "クジラ",
    "イルカ",
    "サメ",
    "エイ",
    "クラゲ",
    "タコ",
    "イカ",
    "カニ",
    "エビ",
    "ロブスター",
    "サーモン",
    "マグロ",
    "カツオ",
    "イワシ",
    "サバ",
    "メダカ",
    "金魚",
    "コイ",
    "ウナギ",
    "フラミンゴ",
    "ペンギン",
    "スズメ",
    "ツバメ",
    "カラス",
    "ハト",
    "ワシ",
    "タカ",
    "フクロウ",
    "ハチドリ",
    "キツツキ",
    "ハクチョウ",
    "ガチョウ",
    "カモ",
    "タンチョウヅル",
    "ダチョウ",
    "ニワトリ",
    "アヒル",
    "インコ",
    "オウム",
    "ショウジョウコウカンチョウ(オウム系)",
    "コンドル",
    "シマウマ",
    "カバ(重複あり注意)→既出のため「バイソン」に変更",
    "バイソン",
    "バッファロー",
    "アンテロープ",
    "ガゼル",
    "オカピ",
    "ラクダ",
    "ダチョウ(重複あり注意)→既出のため「エミュー」に変更",
    "エミュー",
    "ピューマ",
    "ジャガー",
    "オセロット",
    "トナカイ",
    "ヘラジカ",
    "ワラビー",
    "ディンゴ",
    "オオヤマネコ",
    "マーモット",
    "ビーバー",
    "ウォンバット",
    "ナマケモノ",
    "アリクイ",
    "アルマジロ",
    "ハゲワシ",
    "ハクビシン",
    "カモシカ",
    "ミーアキャット",
    "アザラシ",
    "アシカ",
    "セイウチ",
    "ホッキョクグマ",
    "ホッキョクギツネ",
    "イッカク",
    "シャチ",
    "シロクマ(ホッキョクグマと同じため取り消し)→「セミ」に変更",
    "セミ",
    "カブトムシ",
    "クワガタムシ",
    "チョウチョ",
    "ガ",
    "バッタ",
    "コオロギ",
    "キリギリス",
    "テントウムシ",
    "カマキリ",
    "トンボ",
    "ハエ",
    "カ",
    "アリ",
    "ハチ",
    "クモ",
    "テントウムシ(重複有)→「ダンゴムシ」に変更",
    "ダンゴムシ",
    "ミミズ",
    "ナメクジ",
    "カタツムリ",
    "カエル",
    "オタマジャクシ",
    "ヘビ",
    "トカゲ",
    "ワニ",
    "カメ",
    "イグアナ",
    "カメレオン",
    "ヤモリ",
    "サンショウウオ",
    "アザラシ(重複有)→「ラッコ」に変更",
    "ラッコ",
    "タツノオトシゴ",
    "ウニ",
    "ヒトデ",
    "ナマコ",
    "カニ(重複有)→「シャコ」に変更",
    "シャコ",
    "ホタテ",
    "カキ(貝)",
    "アサリ",
    "シジミ",
    "ハマグリ",
    "鳥居",
    "城",
    "神社",
    "寺",
    "墓",
    "ビル",
    "家",
    "マンション",
    "アパート",
    "テント",
    "コテージ",
    "ログハウス",
    "ホテル",
    "リゾート",
    "ユースホステル",
    "大学",
    "小学校",
    "中学校",
    "高校",
    "幼稚園",
    "保育園",
    "病院",
    "歯医者",
    "警察署",
    "消防署",
    "図書館",
    "美術館",
    "博物館",
    "水族館",
    "動物園",
    "植物園",
    "遊園地",
    "テーマパーク",
    "スキー場",
    "ビーチ",
    "公園",
    "庭園",
    "スタジアム",
    "野球場",
    "サッカー場",
    "競馬場",
    "体育館",
    "プール",
    "温泉",
    "銭湯",
    "コンビニ",
    "スーパー",
    "デパート",
    "モール",
    "市場",
    "駅",
    "バス停",
    "空港",
    "港",
    "駐車場",
    "トイレ",
    "橋",
    "道路",
    "横断歩道",
    "信号機",
    "電信柱",
    "電線",
    "街灯",
    "噴水",
    "ベンチ",
    "彫刻",
    "オフィスビル",
    "工場",
    "倉庫",
    "港湾施設",
    "信用金庫",
    "銀行",
    "郵便局",
    "役所",
    "市役所",
    "法務局",
    "税務署",
    "議会堂",
    "裁判所",
    "刑務所",
    "軍事基地",
    "護衛艦",
    "潜水艦",
    "船",
    "ヨット",
    "ボート",
    "カヌー",
    "カヤック",
    "ジェットスキー",
    "車",
    "バス",
    "トラック",
    "バイク",
    "自転車",
    "スケートボード",
    "ローラースケート",
    "三輪車",
    "キックボード",
    "電車",
    "新幹線",
    "モノレール",
    "路面電車",
    "ケーブルカー",
    "タクシー",
    "リムジン",
    "救急車",
    "パトカー",
    "消防車",
    "清掃車",
    "ゴミ収集車",
    "フォークリフト",
    "クレーン車",
    "ヘリコプター",
    "飛行機",
    "グライダー",
    "熱気球",
    "宇宙船",
    "ロケット",
    "人工衛星",
    "人形",
    "テディベア",
    "ロボット",
    "恐竜フィギュア",
    "電子レンジ",
    "冷蔵庫",
    "テレビ",
    "パソコン",
    "スマートフォン",
    "タブレット",
    "ノートパソコン",
    "ゲーム機",
    "ラジオ",
    "ヘッドホン",
    "スピーカー",
    "電話機(固定)",
    "扇風機",
    "エアコン",
    "ストーブ",
    "ヒーター",
    "洗濯機",
    "掃除機",
    "ドライヤー",
    "炊飯器",
    "トースター",
    "ポット",
    "加湿器",
    "除湿機",
    "食器洗い機",
    "ミキサー",
    "コーヒーメーカー",
    "エスプレッソマシン",
    "ブレンダー",
    "ホットプレート",
    "フライパン",
    "鍋",
    "やかん",
    "包丁",
    "まな板",
    "フォーク",
    "スプーン",
    "ナイフ",
    "箸",
    "茶碗",
    "湯のみ",
    "グラス",
    "コップ",
    "マグカップ",
    "皿",
    "ボウル",
    "お盆",
    "箱",
    "引き出し",
    "タンス",
    "棚",
    "机",
    "イス",
    "ソファ",
    "ベッド",
    "枕",
    "布団",
    "マットレス",
    "カーテン",
    "ブラインド",
    "カーペット",
    "絨毯",
    "座布団",
    "クッション",
    "ランプ",
    "シャンデリア",
    "ロウソク",
    "蝶番",
    "ドアノブ",
    "窓",
    "鏡",
    "絵画",
    "ポスター",
    "写真立て",
    "時計",
    "腕時計",
    "メガネ",
    "サングラス",
    "帽子",
    "キャップ",
    "ハンチング帽",
    "麦わら帽子",
    "ベレー帽",
    "ニット帽",
    "マフラー",
    "手袋",
    "マスク",
    "ネックレス",
    "ブレスレット",
    "指輪",
    "ピアス",
    "イヤリング",
    "ベルト",
    "靴",
    "ブーツ",
    "サンダル",
    "スニーカー",
    "ハイヒール",
    "下駄",
    "草履",
    "スリッパ",
    "靴下",
    "タイツ",
    "ストッキング",
    "ジーンズ",
    "スカート",
    "ズボン",
    "シャツ",
    "ブラウス",
    "ジャケット",
    "コート",
    "セーター",
    "パーカー",
    "トレーナー",
    "Tシャツ",
    "タンクトップ",
    "スーツ",
    "ドレス",
    "ワンピース",
    "水着",
    "パジャマ",
    "着物",
    "浴衣",
    "羽織",
    "はかま",
    "学生服",
    "制服",
    "帯",
    "ハンカチ",
    "ティッシュ",
    "タオル",
    "毛布",
    "シーツ",
    "バスタオル",
    "フェイスタオル",
    "雨傘",
    "日傘",
    "レインコート",
    "長靴",
    "ビニール傘",
    "財布",
    "バッグ",
    "リュックサック",
    "スーツケース",
    "エコバッグ",
    "ハンドバッグ",
    "クラッチバッグ",
    "ポーチ",
    "ポシェット",
    "筆箱",
    "ペン",
    "鉛筆",
    "シャーペン",
    "消しゴム",
    "定規",
    "コンパス(文具)",
    "分度器",
    "マーカー",
    "クレヨン",
    "色鉛筆",
    "絵の具",
    "絵筆",
    "スケッチブック",
    "ノート",
    "メモ帳",
    "付箋",
    "テープ",
    "のり",
    "ホッチキス",
    "クリップ",
    "セロハンテープ",
    "ガムテープ",
    "ビニールテープ",
    "ハサミ",
    "カッター",
    "カッターマット",
    "裁縫道具",
    "針と糸",
    "ボタン",
    "ファスナー",
    "スナップボタン",
    "安全ピン",
    "目打ち",
    "メジャー(裁縫用)",
    "アイロン",
    "アイロン台",
    "ミシン",
    "布",
    "レース",
    "リボン",
    "毛糸",
    "編み棒",
    "かぎ針",
    "ビーズ",
    "フェルト",
    "図鑑",
    "辞書",
    "新聞",
    "雑誌",
    "小説",
    "絵本",
    "コミック",
    "地図",
    "ガイドブック",
    "教科書",
    "参考書",
    "問題集",
    "ノベルティグッズ",
    "しおり",
    "メガホン",
    "スピーカー(重複注意)→「メトロノーム」に変更",
    "メトロノーム",
    "楽譜",
    "ギター",
    "ベース",
    "ドラム",
    "ピアノ",
    "バイオリン",
    "ビオラ",
    "チェロ",
    "コントラバス",
    "ハープ",
    "フルート",
    "クラリネット",
    "サックス",
    "トランペット",
    "トロンボーン",
    "ホルン",
    "チューバ",
    "オーボエ",
    "ファゴット",
    "アコーディオン",
    "ハーモニカ",
    "リコーダー",
    "シンセサイザー",
    "エレキギター",
    "ウクレレ",
    "マンドリン",
    "バンジョー",
    "カスタネット",
    "マラカス",
    "タンバリン",
    "カホン",
    "コンガ",
    "ボンゴ",
    "シンバル",
    "トライアングル",
    "ベル",
    "鐘",
    "鏡餅",
    "門松",
    "しめ縄",
    "七夕飾り",
    "クリスマスツリー",
    "クリスマスリース",
    "イルミネーション",
    "こいのぼり",
    "ひな人形",
    "五月人形",
    "鏡開き",
    "竹筒",
    "茶室",
    "茶道具",
    "陶器",
    "焼き物",
    "漆器",
    "和紙",
    "墨",
    "硯",
    "筆(書道用)",
    "半紙",
    "書道セット",
    "折り紙",
    "千代紙",
    "おりがみの鶴",
    "紙飛行機",
    "紙風船",
    "紙コップ",
    "紙皿",
    "段ボール箱",
    "荷札",
    "伝票",
    "レシート",
    "切符",
    "乗車券",
    "入場券",
    "定期券",
    "パスケース",
    "スタンプ",
    "判子",
    "インク",
    "万年筆",
    "筆ペン",
    "筆文字",
    "サインペン",
    "ボールペン",
    "マーカー(重複注意)→「蛍光ペン」に変更",
    "蛍光ペン",
    "レーザーポインター",
    "白板",
    "黒板",
    "チョーク",
    "ホワイトボード",
    "マグネット",
    "磁石",
    "磁石付きクリップ",
    "ステッカー",
    "シール",
    "ワッペン",
    "バッジ",
    "メダル",
    "トロフィー",
    "表彰状",
    "写真",
    "カメラ",
    "ビデオカメラ",
    "ウェブカメラ",
    "三脚",
    "フィルム",
    "SDカード",
    "USBメモリ",
    "外付けハードディスク",
    "マウス",
    "キーボード",
    "プリンター",
    "スキャナー",
    "コピーマシン",
    "プロジェクター",
    "HDMIケーブル",
    "LANケーブル",
    "ルーター",
    "モデム",
    "スマートウォッチ",
    "カードリーダー",
    "電卓",
    "体重計",
    "体温計",
    "血圧計",
    "万歩計",
    "ノギス",
    "定規(重複注意)→「スライド尺」に変更",
    "スライド尺",
    "シャベル",
    "スコップ",
    "クワ",
    "カマ",
    "鎌(同義語)→「ジョウロ」に変更",
    "ジョウロ",
    "ホース",
    "じょうろ(重複)→「スプリンクラー」に変更",
    "スプリンクラー",
    "剪定ばさみ",
    "ノコギリ",
    "カナヅチ",
    "ドライバー",
    "ペンチ",
    "ニッパー",
    "モンキーレンチ",
    "スパナ",
    "レンチ",
    "工具箱",
    "釘",
    "ねじ",
    "ボルト",
    "ナット",
    "ワッシャー",
    "バネ",
    "チェーン",
    "ロープ",
    "ワイヤー",
    "ビニール紐",
    "ガムテープ(重複注意)→「布テープ」に変更",
    "布テープ",
    "ビニール袋",
    "レジ袋",
    "ショッピングバッグ(重複注意)→「風呂敷」に変更",
    "風呂敷",
    "スーツカバー",
    "クリーニング袋",
    "機関車",
    "蒸気機関車",
    "貨物列車",
    "客車",
    "電車(重複)→「寝台列車」に変更",
    "寝台列車",
    "ケーブルカー(重複)→「ゴンドラ」に変更",
    "ゴンドラ",
    "バイク(重複)→「電動キックボード」に変更",
    "電動キックボード",
    "セグウェイ",
    "一輪車",
    "キックボード(重複)→「スクーター」に変更",
    "スクーター",
    "トラクター",
    "コンバイン",
    "除雪車",
    "清雪車",
    "ロードローラー",
    "ブルドーザー",
    "パワーショベル",
    "ショベルカー",
    "ダンプカー",
    "ミキサー車",
    "パトロールカー(パトカー)重複→「白バイ」に変更",
    "白バイ",
    "救命ボート",
    "救命いかだ",
    "救命胴衣",
    "ライフジャケット",
    "パラシュート",
    "パラグライダー",
    "ハンググライダー",
    "ドローン",
    "小型無人機",
    "UAV(無人航空機)",
    "ロボットアーム",
    "マニピュレーター",
    "3Dプリンター",
    "レーザーカッター",
    "切削加工機",
    "旋盤",
    "フライス盤",
    "ドリル",
    "ボール盤",
    "プレス機",
    "クレーン(重複注意)→「タワークレーン」に変更",
    "タワークレーン",
    "リフト",
    "パレット",
    "パレットトラック",
    "チェーンブロック",
    "ロープウェイ",
    "ジップライン",
    "エスカレーター",
    "エレベーター",
    "旅行カバン(重複注意)→「トランク」に変更",
    "トランク",
    "タキシード",
    "ウェディングドレス",
    "花束",
    "ブーケトス",
    "ウェディングケーキ",
    "ベール",
    "タキシード仮面(パロディ)→「ハイヤー」に変更",
    "ハイヤー",
    "バラ",
    "チューリップ",
    "ヒマワリ",
    "サクラ",
    "ウメ",
    "モミジ",
    "イチョウ",
    "シロツメクサ",
    "コスモス",
    "キク",
    "ボタン",
    "シャクヤク",
    "ガーベラ",
    "ラベンダー",
    "ローズマリー",
    "ミント",
    "バジル",
    "パセリ",
    "セロリ",
    "ネギ",
    "ニラ",
    "シソ",
    "大葉",
    "タケノコ",
    "山菜",
    "シイタケ",
    "マツタケ",
    "シメジ",
    "エリンギ",
    "エノキ",
    "マッシュルーム(重複注意)→「ポルチーニ」に変更",
    "ポルチーニ",
    "トリュフ",
    "キャビア",
    "フォアグラ",
    "ロブスター(重複注意)→「オマールエビ」に変更",
    "オマールエビ",
    "カニ(重複)→「ズワイガニ」に変更",
    "ズワイガニ",
    "タラバガニ",
    "カニカマ",
    "カニクリームコロッケ",
    "エビフライ",
    "カツ丼",
    "天丼",
    "親子丼",
    "牛丼",
    "かつお節",
    "昆布",
    "ワカメ",
    "海苔",
    "ヒジキ",
    "かまぼこ",
    "ちくわ",
    "はんぺん",
    "さつま揚げ",
    "ごぼう",
    "レンコン",
    "しょうが",
    "ニンニク",
    "ゴマ",
    "大豆",
    "小豆",
    "おから",
    "豆乳",
    "湯葉",
    "湯豆腐",
    "冷奴",
    "厚揚げ",
    "がんもどき",
    "卵焼き",
    "オムレツ",
    "ゆで卵",
    "半熟卵",
    "温泉卵",
    "目玉焼き",
    "スクランブルエッグ",
    "プーチン(カナダ料理)",
    "バーベキュー",
    "ホットドッグ",
    "タコス",
    "ブリトー",
    "ナチョス",
    "パエリア",
    "ガスパチョ",
    "クスクス",
    "ピロシキ",
    "ボルシチ",
    "ラザニア",
    "リゾット",
    "フィッシュ＆チップス",
    "ローストビーフ",
    "ステーキ(重複注意)→「ローストチキン」に変更",
    "ローストチキン",
    "生ハムメロン",
    "ビーフストロガノフ",
    "カプレーゼ",
    "ブルスケッタ",
    "フォンダンショコラ",
    "プロフィットロール",
    "ガトーショコラ",
    "チーズケーキ",
    "ショートケーキ",
    "モンブラン",
    "ティラミス",
    "エクレア",
    "シュークリーム",
    "ミルフィーユ",
    "クレープ",
    "マドレーヌ",
    "フィナンシェ",
    "カヌレ",
    "カステラ",
    "羊羹",
    "まんじゅう",
    "最中",
    "どら焼き",
    "カステラ(重複注意)→「わらび餅」に変更",
    "わらび餅",
    "大判焼き",
    "今川焼き",
    "人形焼き",
    "カルメ焼き",
    "カキ氷",
    "アンズ飴",
    "綿菓子",
    "チョコバナナ",
    "リンゴ飴",
    "ポップコーン",
    "とうもろこし(重複注意)→「焼きとうもろこし」に変更",
    "焼きとうもろこし",
    "フランクフルト",
    "焼きそば",
    "おでん",
    "おにぎり",
    "梅干し",
    "タラコ",
    "明太子",
    "筑前煮",
    "肉じゃが",
    "味噌煮込みうどん",
    "きつねうどん",
    "天ぷらそば(重複注意)→「ざるそば」に変更",
    "ざるそば",
    "かき揚げ",
    "天丼(重複)→「穴子天丼」に変更",
    "穴子天丼",
    "鰻丼",
    "鰻重",
    "しらす丼",
    "いくら丼",
    "うに丼",
    "海鮮丼",
    "ちらし寿司",
    "手巻き寿司",
    "カリフォルニアロール",
    "炙りサーモン",
    "アジの開き",
    "サバの味噌煮",
    "ブリの照り焼き",
    "サンマの塩焼き",
    "鮭のムニエル",
    "タラの鍋",
    "カツオのたたき",
    "マグロの漬け",
    "イカ焼き",
    "ホタテバター焼き",
    "タコの唐揚げ",
    "白身魚のフライ",
    "エビチリ",
    "エビマヨ",
    "フカヒレスープ",
    "酢豚",
    "餃子(重複)→「小籠包」に変更",
    "小籠包",
    "シュウマイ",
    "春巻き(重複)→「ゴマ団子」に変更",
    "ゴマ団子",
    "麻婆豆腐",
    "回鍋肉",
    "青椒肉絲",
    "チャーハン",
    "中華まん",
    "肉まん",
    "あんまん",
    "ピザ(重複)→「マルゲリータピザ」に変更",
    "マルゲリータピザ",
    "クワトロフォルマッジ",
    "ペペロンチーノ",
    "カルボナーラ",
    "ボロネーゼ",
    "ミートソーススパゲティ",
    "ナポリタン",
    "タラコスパゲティ",
    "醤油ラーメン",
    "味噌ラーメン",
    "塩ラーメン",
    "豚骨ラーメン",
    "担々麺",
    "油そば",
    "つけ麺",
    "フォー(重複)→「ビーフン」に変更",
    "ビーフン",
    "パッタイ(タイ)",
    "フレンチトースト",
    "シリアル",
    "グラノーラ",
    "オートミール",
    "ヨーグルト(重複)→「ギリシャヨーグルト」に変更",
    "ギリシャヨーグルト",
    "バターサンド",
    "クリームパン",
    "アンパン",
    "メロンパン",
    "カレーパン",
    "コロッケパン",
    "ハンバーガー(重複)→「チーズバーガー」に変更",
    "チーズバーガー",
    "フィッシュバーガー",
    "テリヤキバーガー",
    "照り焼きチキン",
    "ファミリーレストラン",
    "ファストフード店",
    "カフェ",
    "喫茶店",
    "居酒屋",
    "バー",
    "パブ",
    "クラブ(音楽)",
    "カラオケボックス",
    "ライブハウス",
    "劇場",
    "映画館",
    "プラネタリウム",
    "博物館(重複)→「科学館」に変更",
    "科学館",
    "美術館(重複)→「ギャラリー」に変更",
    "ギャラリー",
    "水族館(重複)→「イルカショー会場」に変更",
    "イルカショー会場",
    "警察署(重複)→「交番」に変更",
    "交番",
    "消防署(重複)→「消防出張所」に変更",
    "消防出張所",
    "病院(重複)→「クリニック」に変更",
    "クリニック",
    "歯医者(重複)→「デンタルクリニック」に変更",
    "デンタルクリニック",
    "薬局",
    "ドラッグストア",
    "文房具店",
    "本屋",
    "古本屋",
    "レコードショップ",
    "CDショップ",
    "楽器店",
    "花屋",
    "八百屋",
    "魚屋",
    "肉屋",
    "パン屋",
    "ケーキ屋",
    "洋菓子店",
    "和菓子店",
    "電器屋",
    "家具屋",
    "ホームセンター",
    "DIYショップ",
    "スポーツ用品店",
    "アウトドアショップ",
    "自転車屋",
    "バイクショップ",
    "カー用品店",
    "ガソリンスタンド",
    "洗車場",
    "修理工場",
    "カーディーラー",
    "レンタカーショップ",
    "不動産屋",
    "保険屋",
    "郵便局(重複)→「宅配便センター」に変更",
    "宅配便センター",
    "配送センター",
    "倉庫(重複)→「物流倉庫」に変更",
    "物流倉庫",
    "インターネットカフェ",
    "漫画喫茶",
    "ネットカフェ(重複)→「ゲームセンター」に変更",
    "ゲームセンター",
    "パチンコ店",
    "スロット店",
    "麻雀荘",
    "ボウリング場",
    "ビリヤード場",
    "ダーツバー",
    "ゴルフ場",
    "ゴルフ練習場",
    "テニスコート",
    "バスケットコート",
    "バレーボールコート",
    "バドミントンコート",
    "卓球台",
    "ボクシングリング",
    "レスリングマット",
    "柔道畳",
    "剣道場",
    "弓道場",
    "弓矢",
    "弓",
    "剣",
    "刀",
    "スポーツカー",
    "F1マシン",
    "レースカー",
    "カート",
    "オートバイレース用バイク",
    "スノーモービル",
    "ジェットスキー(重複)→「水上バイク」に変更",
    "水上バイク",
    "セーリングボート",
    "ウィンドサーフィン",
    "サーフボード",
    "スノーボード",
    "スキー板",
    "スキーポール",
    "スノーシュー",
    "スケート靴",
    "フィギュアスケート用靴",
    "アイスホッケー用スティック",
    "アイスホッケーパック",
    "テニスラケット",
    "バドミントンラケット",
    "卓球ラケット",
    "野球バット",
    "野球ボール",
    "グローブ(野球)",
    "サッカーボール",
    "バスケットボール",
    "バレーボール",
    "ラグビーボール",
    "アメリカンフットボール",
    "ハンドボール",
    "ドッジボール",
    "ソフトボール",
    "クリケットバット",
    "ゴルフクラブ",
    "ゴルフボール",
    "フライングディスク(フリスビー)",
    "ブーメラン",
    "投げ縄",
    "弓矢(重複)→「クロスボウ」に変更",
    "クロスボウ",
    "矢尻",
    "弓道着",
    "柔道着",
    "空手着",
    "剣道防具",
    "フェンシング用剣",
    "フェンシングマスク",
    "サーベル",
    "エペ",
    "フルーレ",
    "サッカーゴール",
    "バスケットゴール",
    "バレーネット",
    "テニスネット",
    "バドミントンネット",
    "卓球ネット",
    "陸上トラック",
    "ハードル",
    "走り幅跳び用砂場",
    "棒高跳び用ポール",
    "やり投げ用やり",
    "砲丸",
    "円盤",
    "ハンマー(投げ)",
    "棒高跳びマット",
    "スターティングブロック",
    "競泳用水着",
    "競泳ゴーグル",
    "競泳キャップ",
    "水球ボール",
    "シンクロナイズドスイミング用鼻栓",
    "飛び込み台",
    "ライフセーバー浮き輪",
    "ビーチパラソル",
    "ビーチチェア",
    "ゴーグル(スキー)",
    "ヘルメット(自転車)",
    "ヘルメット(バイク)",
    "プロテクター(肘用)",
    "プロテクター(膝用)",
    "レガース(サッカー)",
    "レスキューボート",
    "救命救急ヘリ",
    "野生動物保護区",
    "国立公園",
    "世界遺産",
    "文化遺産",
    "自然遺産",
    "国定公園",
    "花畑",
    "果樹園",
    "牧場",
    "水田",
    "畑",
    "ビニールハウス",
    "トラクター(重複)→「コンバイン(重複)」→「モートラ」に変更",
    "モートラ",
    "稲",
    "麦",
    "トウモロコシ(重複)→「コメ」に変更",
    "コメ",
    "小麦粉",
    "米粉",
    "大麦",
    "ライ麦",
    "そば粉",
    "豆乳(重複)→「アーモンドミルク」に変更",
    "アーモンドミルク",
    "ココナッツミルク",
    "豆腐(重複)→「ソイチーズ」に変更",
    "ソイチーズ",
    "ベジタリアン料理",
    "ヴィーガン料理",
    "ハラール食品",
    "コーシャ食品",
    "生野菜サラダ",
    "ポテトサラダ",
    "マカロニサラダ",
    "シーザーサラダ",
    "ギリシャサラダ",
    "タブレ(中東サラダ)",
    "カプレーゼ(重複)→「ニース風サラダ」に変更",
    "ニース風サラダ",
    "ウォルドーフサラダ",
    "カボチャサラダ",
    "コールスロー",
    "ビネグレットサラダ",
    "果物の盛り合わせ",
    "チーズフォンデュ",
    "チョコフォンデュ",
    "カレー(重複)→「スープカレー」に変更",
    "スープカレー",
    "トムヤムクン",
    "ラクサ(シンガポール)",
    "フカヒレスープ(重複)→「ワンタンスープ」に変更",
    "ワンタンスープ",
    "ミネストローネ",
    "ポタージュ",
    "クラムチャウダー",
    "オニオンスープ",
    "コンソメスープ",
    "味噌汁(重複)→「豚汁」に変更",
    "豚汁",
    "すまし汁",
    "かに汁",
    "はまぐり汁",
    "しじみ汁",
    "つみれ汁",
    "けんちん汁",
    "雑炊",
    "おかゆ",
    "リゾット(重複)→「おじや」に変更",
    "おじや",
    "パエリア(重複)→「ビリアニ」に変更",
    "ビリアニ",
    "プルコギ",
    "キムチ",
    "ビビンバ",
    "チヂミ",
    "サムゲタン",
    "カルビ",
    "ホルモン",
    "ジンギスカン",
    "ジャージャー麺",
    "冷麺",
    "クッパ",
    "トッポギ",
    "チーズトッポギ",
    "マッコリ",
    "紹興酒",
    "サケ(日本酒)",
    "焼酎",
    "ウイスキー",
    "ブランデー",
    "ジン",
    "ウォッカ",
    "テキーラ",
    "ラム",
    "カクテル",
    "ビール(重複)→「クラフトビール」に変更",
    "クラフトビール",
    "ノンアルコールビール",
    "ノンアルコールカクテル",
    "ハーブティー",
    "ジャスミン茶",
    "烏龍茶",
    "プーアル茶",
    "紅茶(重複)→「アールグレイ」に変更",
    "アールグレイ",
    "イングリッシュブレックファスト",
    "ダージリン",
    "セイロンティー",
    "玄米茶",
    "ほうじ茶",
    "ジャコウネココーヒー",
    "エスプレッソ(重複注意)→「カフェラテ」に変更",
    "カフェラテ",
    "カプチーノ",
    "アメリカーノ",
    "フラットホワイト",
    "ドリップコーヒー",
    "インスタントコーヒー",
    "ココア",
    "ホットチョコレート",
    "ミルクセーキ",
    "シェイク",
    "スムージー",
    "フラッペ",
    "フローズンヨーグルト",
    "シャーベット",
    "ソルベ",
    "グラニータ",
    "アフォガート",
    "ジェラート",
    "パフェ",
    "サンデー",
    "ババロア",
    "ムース",
    "ティラミス(重複)→「パンナコッタ」に変更",
    "パンナコッタ",
    "グレープフルーツ",
    "レッドグレープフルーツ",
    "カシス",
    "ブルーベリー",
    "ラズベリー",
    "ブラックベリー",
    "クランベリー",
    "アサイー",
    "ゴジベリー",
    "マルベリー",
    "枝豆(重複)→「そら豆」に変更",
    "そら豆",
    "えんどう豆",
    "スナップエンドウ",
    "落花生",
    "ピスタチオ",
    "アーモンド(重複)→「カシューナッツ」に変更",
    "カシューナッツ",
    "マカダミアナッツ",
    "クルミ",
    "ヘーゼルナッツ",
    "ブラジルナッツ",
    "ピーカンナッツ",
    "ココナッツ",
    "ココナッツウォーター",
    "タピオカ",
    "コーヒーゼリー",
    "杏仁豆腐",
    "マンゴープリン",
    "チャイ",
    "ラッシー",
    "バナナジュース",
    "スイカジュース",
    "メロンソーダ",
    "クリームソーダ",
    "コーラ(重複)→「ジンジャーエール」に変更",
    "ジンジャーエール",
    "サイダー",
    "ラムネ",
    "烏龍茶(重複)→「ジャスミンティー」に変更",
    "ジャスミンティー",
    "ハイビスカスティー",
    "ローズヒップティー",
    "カモミールティー",
    "ペパーミントティー",
    "レモングラスティー",
    "ハトムギ茶",
    "酢飲料",
    "ワサビ",
    "カラシ",
    "マスタード",
    "ケチャップ",
    "マヨネーズ",
    "ソース(ウスター)",
    "オイスターソース",
    "醤油",
    "みりん",
    "酒(調理酒)",
    "砂糖",
    "塩",
    "コショウ",
    "パプリカ粉",
    "チリパウダー",
    "カレー粉",
    "ガラムマサラ",
    "ターメリック",
    "クミン",
    "コリアンダー",
    "シナモン",
    "ナツメグ",
    "クローブ",
    "スターアニス",
    "ガーリックパウダー",
    "オニオンパウダー",
    "生姜パウダー",
    "ハーブソルト",
    "柚子胡椒",
    "山椒",
    "花椒",
    "食用花",
    "エディブルフラワー",
    "カカオ",
    "カカオニブ",
    "ホワイトチョコレート",
    "ミルクチョコレート",
    "ダークチョコレート",
    "チョコスプレー",
    "チョコチップ",
    "チョコレートシロップ",
    "メープルシロップ",
    "アガベシロップ",
    "ハチミツ(重複)→「マヌカハニー」に変更",
    "マヌカハニー",
    "黒蜜",
    "三温糖",
    "きび糖",
    "てんさい糖",
    "上白糖",
    "グラニュー糖",
    "粉糖",
    "割り箸",
    "爪楊枝",
    "竹串",
    "串",
    "センス(扇子)",
    "うちわ",
    "ハエたたき",
    "ゴキブリホイホイ",
    "虫取り網",
    "虫かご",
    "水鉄砲",
    "シャボン玉",
    "花火",
    "線香花火",
    "打ち上げ花火",
    "ロケット花火",
    "ねずみ花火",
    "パラソル(重複注意)→「ビーチパラソル」は出たため「日除けシェード」に変更",
    "日除けシェード",
    "テント(重複)→「ワンポールテント」に変更",
    "ワンポールテント",
    "タープ",
    "ハンモック",
    "キャンプファイヤー",
    "焚き火台",
    "バーベキューグリル",
    "チャコール",
    "着火剤",
    "マッチ",
    "ライター",
    "火打石",
    "フェザースティック",
    "登山靴",
    "登山リュック",
    "トレッキングポール",
    "水筒",
    "保温ボトル",
    "クーラーボックス",
    "保冷剤",
    "折りたたみ椅子",
    "折りたたみテーブル",
    "簡易トイレ",
    "携帯シャワー",
    "スリーピングバッグ(寝袋)",
    "スリーピングパッド",
    "ポンチョ",
    "レインウェア",
    "防水スプレー",
    "虫除けスプレー",
    "日焼け止め",
    "サングラス(重複)→「偏光サングラス」に変更",
    "偏光サングラス",
    "双眼鏡",
    "望遠鏡",
    "顕微鏡",
    "拡大鏡",
    "メガネ(重複)→「老眼鏡」に変更",
    "老眼鏡",
    "ハズキルーペ(商品名)→「ルーペ」に変更",
    "ルーペ",
    "地球儀",
    "地図(重複)→「道路地図」に変更",
    "道路地図",
    "カーナビ",
    "コンパス(方位磁石)",
    "GPS機器",
    "スマートウォッチ(重複)→「フィットネストラッカー」に変更",
    "フィットネストラッカー",
    "温度計",
    "湿度計",
    "気圧計",
    "高度計",
    "万華鏡",
    "ルービックキューブ",
    "ジグソーパズル",
    "クロスワード",
    "数独",
    "将棋",
    "囲碁",
    "チェス",
    "チェッカー",
    "オセロ",
    "トランプ",
    "UNO",
    "人生ゲーム",
    "モノポリー",
    "カルタ",
    "百人一首",
    "花札",
    "マージャン牌",
    "ドミノ",
    "ジェンガ",
    "ツイスター",
    "ボードゲーム(一般)",
    "RPGゲーム",
    "野球盤",
    "サッカー盤",
    "ビリヤード(重複)→「スヌーカー」に変更",
    "スヌーカー",
    "ダーツ(重複)→「ソフトダーツ」に変更",
    "ソフトダーツ",
    "ホッケーゲーム",
    "エアホッケー",
    "ピンボール",
    "パチンコ(重複)→「スロットマシン」",
    "スロットマシン",
    "ガチャガチャ",
    "クレーンゲーム",
    "プラモデル",
    "ガンプラ",
    "ミニ四駆",
    "ラジコンカー",
    "ラジコンヘリ",
    "ドローン(重複)→「小型ラジコンドローン」に変更",
    "小型ラジコンドローン",
    "電車模型",
    "鉄道ジオラマ",
    "シュノーケル",
    "ダイビングマスク",
    "フィン(足ひれ)",
    "ウェットスーツ",
    "ドライスーツ",
    "水中カメラ",
    "アクションカメラ",
    "ヘッドランプ",
    "LEDランタン",
    "キャンドルランタン",
    "手回しライト",
    "ソーラーライト",
    "乾電池",
    "充電池",
    "ソーラーパネル",
    "ポータブル電源",
    "発電機",
    "エンジン",
    "モーター",
    "プロペラ",
    "ジャイロスコープ",
    "センサー",
    "カメラレンズ",
    "望遠レンズ",
    "マクロレンズ",
    "広角レンズ",
    "標準レンズ",
    "カメラ三脚(重複)→「一脚」に変更",
    "一脚",
    "カメラストラップ",
    "レンズフード",
    "レンズキャップ",
    "SDカード(重複)→「CFカード」に変更",
    "CFカード",
    "メモリースティック",
    "ハードディスク(重複)→「SSD」に変更",
    "SSD",
    "USBケーブル",
    "HDMIケーブル(重複)→「DisplayPortケーブル」に変更",
    "DisplayPortケーブル",
    "VGAケーブル",
    "DVIケーブル",
    "イーサネットケーブル(重複類似)→「光ファイバーケーブル」に変更",
    "光ファイバーケーブル",
    "電源タップ",
    "延長コード",
    "テーブルタップ",
    "コンセント",
    "プラグ",
    "アダプター",
    "変圧器",
    "変換プラグ",
    "バッテリーチャージャー",
    "ソーラーチャージャー",
    "ハンドスピナー",
    "ストレスボール",
    "グリップトレーナー",
    "フィジェットキューブ",
    "ローラーシューズ",
    "ヘルメット(重複)→「プロテクションヘルメット」に変更",
    "プロテクションヘルメット",
    "軍手",
    "作業服",
    "安全靴",
    "反射ベスト",
    "ミリタリーブーツ",
    "迷彩服",
    "防弾チョッキ",
    "防弾ヘルメット",
    "防毒マスク",
    "ガスマスク",
    "スキューバタンク",
    "レギュレーター(ダイビング)",
    "BCジャケット",
    "潜水艦(重複)→「ミニ潜水艇」に変更",
    "ミニ潜水艇",
    "水中スクーター",
    "魚群探知機",
    "磁気コンパス",
    "陸上コンパス(重複)→「サバイバルホイッスル」に変更",
    "サバイバルホイッスル",
    "ファーストエイドキット",
    "絆創膏",
    "ガーゼ",
    "包帯",
    "消毒液",
    "体温計(重複)→「赤外線体温計」に変更",
    "赤外線体温計",
    "血圧計(重複)→「携帯血圧計」に変更",
    "携帯血圧計",
    "注射器",
    "注射針",
    "カテーテル",
    "点滴スタンド",
    "聴診器",
    "医療用マスク",
    "医療用手袋",
    "ゴーグル(重複)→「フェイスシールド」に変更",
    "フェイスシールド",
    "車椅子",
    "松葉杖",
    "担架",
    "AED(自動体外式除細動器)",
    "BGM",
    "CD(重複)→「DVD」に変更",
    "DVD",
    "ブルーレイディスク",
    "VHSテープ",
    "カセットテープ",
    "レコード(重複)→「LPレコード」に変更",
    "LPレコード",
    "EPレコード",
    "シングルCD",
    "MD(ミニディスク)",
    "フロッピーディスク",
    "ハードディスク(重複)→「ZIPディスク」に変更",
    "ZIPディスク",
    "スマートメディア",
    "コンパクトフラッシュ",
    "XDピクチャーカード",
    "マイクロSDカード",
    "SIMカード",
    "ICカード",
    "マイナンバーカード",
    "免許証",
    "パスポート",
    "在留カード",
    "保険証",
    "クレジットカード",
    "デビットカード",
    "プリペイドカード",
    "ギフトカード",
    "商品券",
    "ビール券",
    "お米券",
    "図書カード",
    "QUOカード",
    "スイカ(Suica)",
    "PASMO",
    "ICOCA",
    "TOICA",
    "manaca",
    "はやかけん",
    "Kitaca",
    "SUGOCA",
    "nimoca",
    "りんかいSuica",
    "モバイルSuica",
    "ApplePay",
    "GooglePay",
    "PayPay",
    "LINEPay",
    "d払い",
    "auPAY",
    "楽天ペイ",
    "メルペイ",
    "WeChatPay",
    "Alipay",
]

def start_game(drawer_id: int) -> str:
    topic = random.choice(topics)
    game_id = create_game(drawer_id, topic)
    return game_id

def record_answer(game_id: str, player_id: int, answer: str):
    add_answer(game_id, player_id, answer)

def submit_final_image(game_id: str, url: str):
    set_final_image(game_id, url)

def analyze_ai_answer(game_id: str):
    local_path = get_final_image_path(game_id)
    ai_guess = analyze_image(local_path)  
    set_ai_answer(game_id, ai_guess)

def judge_winner(game_id: str):
    topic = get_topic(game_id)
    ai_ans = get_ai_answer(game_id)
    answers = get_answers(game_id)

    if not answers:
        # 人間回答なし -> AI勝利
        return ("AI", None, topic)

    # 全ての人間回答(answer部分のみ)をリスト化
    human_answers = [a[1] for a in answers]

    # Chat APIで最多回答を抽出（pick_human_final_answer_via_chat関数使用前提）
    chosen = pick_human_final_answer_via_chat(human_answers)
    human_correct = check_answer_via_chat(chosen, topic)
    ai_correct = check_answer_via_chat(ai_ans, topic)

    # 人間勝利条件: 人間正解 & AI不正解
    if human_correct and not ai_correct:
        return ("HUMAN", chosen, topic)
    else:
        return ("AI", chosen, topic)